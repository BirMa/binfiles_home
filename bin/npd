#!/bin/sh

if [[ ! -f ~/bin/np ]]; then
  echo "<error> binary ~/bin/np not found"
  exit 1
fi

PID=`pidof -o %PPID ~/bin/np`
SLEEPS=300   # delay after each mouse nudge (in seconds)

case "$1" in
  start)
    [[ -z "$PID" ]] && ( echo "<info> starting np"; ~/bin/np $SLEEPS & ) || echo "<warn> np already running"
    ;;
  stop)
    [[ -n "$PID" ]] && ( echo "<info> stopping np"; kill $PID ) || echo "<warn> no np"
    ;;
  restart)
    $0 stop
    sleep .5
    $0 start
    ;;
  *)
    echo "usage: $0 {start|stop|restart}"
    exit 1
esac

exit 0

